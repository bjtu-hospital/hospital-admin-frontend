# 新增接口说明

## 1. 根据医生查询当日排班

**端点：** `GET /doctors/{doctor_id}/schedules/today`

**权限：** 管理员

**路径参数：**
- `doctor_id`: 医生ID

**响应示例：**
```json
{
  "code": 0,
  "message": {
    "schedules": [
      {
        "schedule_id": 101,
        "doctor_id": 10,
        "doctor_name": "张医生",
        "department_id": 1,
        "department_name": "心内科",
        "clinic_type": "专家门诊",
        "date": "2025-11-13",
        "time_slot": "上午",
        "total_slots": 20,
        "remaining_slots": 5,
        "available_slot_types": ["普通", "专家"]
      }
    ]
  }
}
```

**字段说明：**
- `available_slot_types`: 该排班可用的号源类型（根据门诊类型判断）

---

## 2. 患者查询接口

**端点：** `GET /patients`

**权限：** 管理员

**查询参数：**
- `name` (可选): 患者姓名（模糊搜索）
- `phone` (可选): 手机号（模糊搜索）
- `patient_id` (可选): 患者ID（精确搜索）

**请求示例：**
```
GET /patients?name=王&phone=138
```

**响应示例：**
```json
{
  "code": 0,
  "message": {
    "patients": [
      {
        "patient_id": 501,
        "name": "王小明",
        "phone": "13812345678",
        "gender": "男",
        "age": 35,
        "id_card": "110101198901011234"
      },
      {
        "patient_id": 502,
        "name": "王大明",
        "phone": "13898765432",
        "gender": "男",
        "age": 42,
        "id_card": "110101198201011234"
      }
    ]
  }
}
```

---

## 3. 获取所有医生列表

**端点：** `GET /doctors`

**权限：** 管理员

**查询参数：**
- `name` (可选): 医生姓名（模糊搜索）
- `department_id` (可选): 科室ID

**响应示例：**
```json
{
  "code": 0,
  "message": {
    "doctors": [
      {
        "doctor_id": 10,
        "name": "张医生",
        "department_id": 1,
        "department_name": "心内科",
        "title": "主任医师",
        "specialization": "心血管疾病"
      }
    ]
  }
}
```

---

## 号源类型与门诊类型对应关系

| 门诊类型 | 可用号源类型 |
|---------|------------|
| 普通门诊 | 普通 |
| 专家门诊 | 普通、专家 |
| 特需门诊 | 普通、专家、特需 |
